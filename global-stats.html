<!DOCTYPE html>
<html>
<head>
  <title>Global Stats | ScratchStats.cf</title>
  <link rel="stylesheet" href="./index.css">
  <link rel="stylesheet" href="./sweetalert2.min.css">
  <script src="./index.js"></script>
  <link rel="shortcut icon" href="./favicon.ico" type="image/x-icon"></link>
  <script src="./sweetalert2.min.js"></script>
<script>
function getStats(){
    griffpatch();
    wazzotv();
    hobsontv();
    fajtv();
    silver();
    projectsAndStuff();
    popularProjects();
    trendingProjects();
}

function griffpatch() {
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.open('GET', 'https://scratch.mit.edu/users/griffpatch/followers/', true);
    xmlhttp.send();
    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {
            var response = xmlhttp.responseText;
            var find = response.search("<h2>");
            var followersnum = response.substring(find, find + 200).match(/\(([^)]+)\)/)[1];
            console.log(followersnum);
            document.getElementById("griffpatch").innerHTML = c(followersnum)+ " followers";
        }
    };
}

function wazzotv() {
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.open('GET', 'https://scratch.mit.edu/users/wazzotv/followers/', true);
    xmlhttp.send();
    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {
            var response = xmlhttp.responseText;
            var find = response.search("<h2>");
            var followersnum = response.substring(find, find + 200).match(/\(([^)]+)\)/)[1];
            console.log(followersnum);
            document.getElementById("wazzotv").innerHTML = c(followersnum)+ " followers";
        }
    };
}

function hobsontv() {
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.open('GET', 'https://scratch.mit.edu/users/hobson-tv/followers/', true);
    xmlhttp.send();
    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {
            var response = xmlhttp.responseText;
            var find = response.search("<h2>");
            var followersnum = response.substring(find, find + 200).match(/\(([^)]+)\)/)[1];
            document.getElementById("hobsontv").innerHTML = c(followersnum)+ " followers";
            console.log(followersnum);
        }
    };}

function fajtv() {
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.open('GET', 'https://scratch.mit.edu/users/funnyanimatorjimtv/followers/', true);
    xmlhttp.send();
    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {
            var response = xmlhttp.responseText;
            var find = response.search("<h2>");
            var followersnum = response.substring(find, find + 200).match(/\(([^)]+)\)/)[1];
            console.log(followersnum);
            document.getElementById("fajtv").innerHTML = c(followersnum)+ " followers";
        }
    };}

function silver() {
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.open('GET', 'https://scratch.mit.edu/users/silvershimmer43/followers/', true);
    xmlhttp.send();
    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {
            var response = xmlhttp.responseText;
            var find = response.search("<h2>");
            var followersnum = response.substring(find, find + 200).match(/\(([^)]+)\)/)[1];
            console.log(followersnum);
            document.getElementById("silvershimmer").innerHTML = c(followersnum)+ " followers";
        }
    };}

function projectsAndStuff() {
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.open('GET', 'http://cors-anywhere.herokuapp.com/https://scratch.mit.edu/statistics/data/daily/', true);
    xmlhttp.send();
    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {
            var response = xmlhttp.responseText;
            var obj = JSON.parse(response);

            document.getElementById("project").innerHTML = c(obj.PROJECT_COUNT);
            document.getElementById("studios").innerHTML = c(obj.STUDIO_COUNT);

            document.getElementById("comments").innerHTML =c(obj.COMMENT_COUNT);
        }
    };
}

function popularProjects () {
  var xmlhttp = new XMLHttpRequest();
xmlhttp.open('GET', 'https://api.scratch.mit.edu/explore/projects?offset=0&language=en&mode=popular&q=*', true);
xmlhttp.send();
xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {
        var response = xmlhttp.responseText;
        var obj = JSON.parse(response);
        var firstProject = obj[0];
        var secondProject = obj[1];
        var thirdProject = obj[2];
        var fourthProject = obj[3];
        var fifthProject = obj[4];
        console.log(firstProject.stats.views);
        //firstProject
var firstProjectsLikes = (((firstProject.stats.loves)/(firstProject.stats.views)).toFixed(1))*100;
        document.getElementById("popularProject1").innerHTML = "<center><a href='https://scratch.mit.edu/projects/"+firstProject.id+"/' class='projTitle' target='blank'>"+firstProject.title+"</a></center><table style='margin:0px;padding:0px;'><td style='margin:0px;padding:0px;'><img style='display:inline; width:132px;height:96px;'src='"+firstProject.image+"'></img></td>&nbsp;<td style='margin:0px;padding:0px;'><ul class='statistics'style='top:0px;padding:0px;list-style-type:none;display:inline-block;font-size:15px;'><li class='statistics' style='color:red;'>üíñ"+firstProject.stats.loves+"</li><li class='statistics' style='color:red;'>‚≠ê"+firstProject.stats.favorites+"</li><li class='statistics'>üëç"+firstProjectsLikes+"%</li><li class='statistics'>üëÅÔ∏è"+firstProject.stats.views+"</li></ul></td></table>";

        //secondProject
        var secondProjectsLikes = (((secondProject.stats.loves)/(secondProject.stats.views)).toFixed(1))*100;
                document.getElementById("popularProject2").innerHTML = "<center><a href='https://scratch.mit.edu/projects/"+secondProject.id+"/' class='projTitle' target='blank'>"+secondProject.title+"</a></center><table style='margin:0px;padding:0px;'><td style='margin:0px;padding:0px;'><img style='display:inline; width:132px;height:96px;'src='"+secondProject.image+"'></img></td>&nbsp;<td style='margin:0px;padding:0px;'><ul class='statistics'style='top:0px;padding:0px;list-style-type:none;display:inline-block;font-size:15px;'><li class='statistics' style='color:red;'>üíñ"+secondProject.stats.loves+"</li><li class='statistics' style='color:red;'>‚≠ê"+secondProject.stats.favorites+"</li><li class='statistics'>üëç"+secondProjectsLikes+"%</li><li class='statistics'>üëÅÔ∏è"+secondProject.stats.views+"</li></ul></td></table>";
//thirdProject
                var thirdProjectsLikes = (((thirdProject.stats.loves)/(thirdProject.stats.views)).toFixed(1))*100;
                        document.getElementById("popularProject3").innerHTML = "<center><a href='https://scratch.mit.edu/projects/"+thirdProject.id+"/' class='projTitle' target='blank'>"+thirdProject.title+"</a></center><table style='margin:0px;padding:0px;'><td style='margin:0px;padding:0px;'><img style='display:inline; width:132px;height:96px;'src='"+thirdProject.image+"'></img></td>&nbsp;<td style='margin:0px;padding:0px;'><ul class='statistics'style='top:0px;padding:0px;list-style-type:none;display:inline-block;font-size:15px;'><li class='statistics' style='color:red;'>üíñ"+thirdProject.stats.loves+"</li><li class='statistics' style='color:red;'>‚≠ê"+thirdProject.stats.favorites+"</li><li class='statistics'>üëç"+thirdProjectsLikes+"%</li><li class='statistics'>üëÅÔ∏è"+thirdProject.stats.views+"</li></ul></td></table>";
//fourthProject

var fourthProjectsLikes = (((fourthProject.stats.loves)/(fourthProject.stats.views)).toFixed(1))*100;
        document.getElementById("popularProject4").innerHTML = "<center><a href='https://scratch.mit.edu/projects/"+fourthProject.id+"/' class='projTitle' target='blank'>"+fourthProject.title+"</a></center><table style='margin:0px;padding:0px;'><td style='margin:0px;padding:0px;'><img style='display:inline; width:132px;height:96px;'src='"+fourthProject.image+"'></img></td>&nbsp;<td style='margin:0px;padding:0px;'><ul class='statistics'style='top:0px;padding:0px;list-style-type:none;display:inline-block;font-size:15px;'><li class='statistics' style='color:red;'>üíñ"+fourthProject.stats.loves+"</li><li class='statistics' style='color:red;'>‚≠ê"+fourthProject.stats.favorites+"</li><li class='statistics'>üëç"+fourthProjectsLikes+"%</li><li class='statistics'>üëÅÔ∏è"+fourthProject.stats.views+"</li></ul></td></table>";


    }
}
};


function trendingProjects () {
  var xmlhttp = new XMLHttpRequest();
xmlhttp.open('GET', 'https://api.scratch.mit.edu/explore/projects?offset=0&language=en&mode=trending&q=*', true);
xmlhttp.send();
xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {
        var response = xmlhttp.responseText;
        var obj = JSON.parse(response);
        var firstProject = obj[0];
        var secondProject = obj[1];
        var thirdProject = obj[2];
        var fourthProject = obj[3];
        var fifthProject = obj[4];
        console.log(firstProject.stats.views);
        //firstProject
var firstProjectsLikes = (((firstProject.stats.loves)/(firstProject.stats.views)).toFixed(1))*100;
        document.getElementById("tpopularProject1").innerHTML = "<center><a href='https://scratch.mit.edu/projects/"+firstProject.id+"/' class='projTitle' target='blank'>"+firstProject.title+"</a></center><table style='margin:0px;padding:0px;'><td style='margin:0px;padding:0px;'><img style='display:inline; width:132px;height:96px;'src='"+firstProject.image+"'></img></td>&nbsp;<td style='margin:0px;padding:0px;'><ul class='statistics'style='top:0px;padding:0px;list-style-type:none;display:inline-block;font-size:15px;'><li class='statistics' style='color:red;'>üíñ"+firstProject.stats.loves+"</li><li class='statistics' style='color:red;'>‚≠ê"+firstProject.stats.favorites+"</li><li class='statistics'>üëç"+firstProjectsLikes+"%</li><li class='statistics'>üëÅÔ∏è"+firstProject.stats.views+"</li></ul></td></table>";

        //secondProject
        var secondProjectsLikes = (((secondProject.stats.loves)/(secondProject.stats.views)).toFixed(1))*100;
                document.getElementById("tpopularProject2").innerHTML = "<center><a href='https://scratch.mit.edu/projects/"+secondProject.id+"/' class='projTitle' target='blank'>"+secondProject.title+"</a></center><table style='margin:0px;padding:0px;'><td style='margin:0px;padding:0px;'><img style='display:inline; width:132px;height:96px;'src='"+secondProject.image+"'></img></td>&nbsp;<td style='margin:0px;padding:0px;'><ul class='statistics'style='top:0px;padding:0px;list-style-type:none;display:inline-block;font-size:15px;'><li class='statistics' style='color:red;'>üíñ"+secondProject.stats.loves+"</li><li class='statistics' style='color:red;'>‚≠ê"+secondProject.stats.favorites+"</li><li class='statistics'>üëç"+secondProjectsLikes+"%</li><li class='statistics'>üëÅÔ∏è"+secondProject.stats.views+"</li></ul></td></table>";
//thirdProject
                var thirdProjectsLikes = (((thirdProject.stats.loves)/(thirdProject.stats.views)).toFixed(1))*100;
                        document.getElementById("tpopularProject3").innerHTML = "<center><a href='https://scratch.mit.edu/projects/"+thirdProject.id+"/' class='projTitle' target='blank'>"+thirdProject.title+"</a></center><table style='margin:0px;padding:0px;'><td style='margin:0px;padding:0px;'><img style='display:inline; width:132px;height:96px;'src='"+thirdProject.image+"'></img></td>&nbsp;<td style='margin:0px;padding:0px;'><ul class='statistics'style='top:0px;padding:0px;list-style-type:none;display:inline-block;font-size:15px;'><li class='statistics' style='color:red;'>üíñ"+thirdProject.stats.loves+"</li><li class='statistics' style='color:red;'>‚≠ê"+thirdProject.stats.favorites+"</li><li class='statistics'>üëç"+thirdProjectsLikes+"%</li><li class='statistics'>üëÅÔ∏è"+thirdProject.stats.views+"</li></ul></td></table>";
//fourthProject

var fourthProjectsLikes = (((fourthProject.stats.loves)/(fourthProject.stats.views)).toFixed(1))*100;
        document.getElementById("tpopularProject4").innerHTML = "<center><a href='https://scratch.mit.edu/projects/"+fourthProject.id+"/' class='projTitle' target='blank'>"+fourthProject.title+"</a></center><table style='margin:0px;padding:0px;'><td style='margin:0px;padding:0px;'><img style='display:inline; width:132px;height:96px;'src='"+fourthProject.image+"'></img></td>&nbsp;<td style='margin:0px;padding:0px;'><ul class='statistics'style='top:0px;padding:0px;list-style-type:none;display:inline-block;font-size:15px;'><li class='statistics' style='color:red;'>üíñ"+fourthProject.stats.loves+"</li><li class='statistics' style='color:red;'>‚≠ê"+fourthProject.stats.favorites+"</li><li class='statistics'>üëç"+fourthProjectsLikes+"%</li><li class='statistics'>üëÅÔ∏è"+fourthProject.stats.views+"</li></ul></td></table>";


    }
}
};

</script>
  </head>

  <body onload="getStats()">
    <nav>
      <ul id="outerNavBar">
        <ul id="navbar">
          <li class="navbar-item">
            <a href="./">
              <center><img src="./icon.png" width="50px"></img></center>
            </a>
          </li>
          <li class="navbar-item">
            <a href="./global-stats.html">
              <div class="navbar-text"><center>Global Stats</center></div>
            </a>
          </li>
          <li class="navbar-item">
            <a href="./about.html">
              <div class="navbar-text"><center>About</center></div>
            </a>
          </li>
        </ul>
      </ul>
    </nav>
  <div id="page">
    <br>
    <br>
    <br>
    <br>
    <div class="text-block">
      <h1 class="century">Global Statistics</h1>
    </div>

    <br><br><br>
    <div class="text-block statstable" id="mostFollowedScratchers">
       <h3 class="noBottomMargin">Top 5 Most Followed Scratchers:</h3>
       <hr>
       <center>
       <table style="font-size:20px;">
          <td style="font-size:20px;">
             <center><div style="display:block;font-size:20px;" class="answer topfive"><a href="https://scratch.mit.edu/users/griffpatch" target="_blank"><img style="width:90px;height:90px;" src="https://cdn2.scratch.mit.edu/get_image/user/1882674_90x90.png"/><br>@griffpatch</a></div>
               <div style="display:block;" id="griffpatch" class="question">????? followers</div>
             </center>
          </td>
          <td style="font-size:20px;">
            <center>
             <div style="display:block;font-size:20px;" class="answer topfive"><a href="https://scratch.mit.edu/users/WazzoTV" target="_blank"><img style="width:90px;height:90px;" src="https://cdn2.scratch.mit.edu/get_image/user/708436_90x90.png"/><br>@WazzoTV</a></div>
               <div style="display:block;" id="wazzotv" class="question">????? followers</div>
             </center>
          </td>
          <td style="font-size:20px;">
             <center><div style="display:block;font-size:20px;" class="answer topfive"><a href="https://scratch.mit.edu/users/Hobson-Tv" target="_blank"><img style="width:90px;height:90px;" src="https://cdn2.scratch.mit.edu/get_image/user/3994425_90x90.png"/><br>@Hobson-TV</a></div>
               <div style="display:block;" id="hobsontv" class="question">????? followers</div></center>
          </td>
          <td style="font-size:20px;">
             <center><div style="display:block;font-size:20px;" class="answer topfive"><a href="https://scratch.mit.edu/users/FunnyAnimatorJimTv" target="_blank"><img style="width:90px;height:90px;" src="https://cdn2.scratch.mit.edu/get_image/user/4291425_90x90.png"/><br>@FunnyAnimatorJimTv</a></div>
               <div style="display:block;" id="fajtv" class="question">????? followers</div></center>
          </td>
          <td style="font-size:20px;">
             <center><div style="display:block;font-size:20px;" class="answer topfive"><a href="https://scratch.mit.edu/users/Silvershimmer43" target="_blank"><img style="width:90px;height:90px;" src="https://cdn2.scratch.mit.edu/get_image/user/764067_90x90.png"/><br>@Silvershimmer43</a></div>
               <div style="display:block;"  id="silvershimmer"class="question">????? followers</div></center>
          </td>

       </table>
       </center>
    </div>
    <br><br><br>
    <div class="text-block statstable" id="currentStats">
       <h3 class="noBottomMargin">On Scratch There Are Currently:</h3>
       <hr>
       <center>
       <table style="font-size:20px;">
          <td style="font-size:20px;">
             <center><div style="display:block;font-size:20px;" id="project"class="answer"></div>
               <div style="display:block;"class="question">Projects</div>
             </center>
          </td>
          <td style="font-size:20px;">
            <center>
             <div style="display:block;font-size:20px;" id="studios" class="answer"></div>
               <div style="display:block;" class="question">Studios</div>
             </center>
          </td>
          <td style="font-size:20px;">
             <center><div style="display:block;font-size:20px;"  id="comments"class="answer"></div>
               <div style="display:block;"class="question">Comments</div></center>
          </td>

       </table>
       </center>
    </div>
    <br><br><br>
    <div class="text-block statstable" id="mostPopularProjects">
       <h3 class="noBottomMargin">Top 4 Most Popular Projects (from Explore tab):</h3>
       <hr>
       <center>
       <table style="font-size:20px;">
          <td style="font-size:20px;">
             <center><div style="display:block;" id="popularProject1" class="special thumbnail">.</div>
             <div style="display:block;" class="question" ><b></b></div>
             </center>
          </td>
          <td style="font-size:20px;">
            <center>
               <center><div style="display:block;" id="popularProject2" class="special thumbnail">.</div>
               <div style="display:block;" class="question" ><b></b></div>
             </center>
          </td>
          <td style="font-size:20px;">
             <center>

                  <div style="display:block;" id="popularProject3" class="special thumbnail">.</div>
                  <div style="display:block;" class="question" ><b></b></div>
             </center>
          </td>
          <td style="font-size:20px;">
             <center>
                <div style="display:block;" id="popularProject4" class="special thumbnail">.</div>
                <div style="display:block;" class="question" ><b></b></div>
              </center>
          </td>

       </table>
       </center>
    </div>
    <div class="text-block statstable" id="mostTrendingProjects">
       <h3 class="noBottomMargin">Top 4 Trending Projects (from Explore tab):</h3>
       <hr>
       <center>
       <table style="font-size:20px;">
          <td style="font-size:20px;">
             <center><div style="display:block;" id="tpopularProject1" class="special thumbnail">.</div>
             <div style="display:block;" class="question" ><b></b></div>
             </center>
          </td>
          <td style="font-size:20px;">
            <center>
               <center><div style="display:block;" id="tpopularProject2" class="special thumbnail">.</div>
               <div style="display:block;" class="question" ><b></b></div>
             </center>
          </td>
          <td style="font-size:20px;">
             <center>

                  <div style="display:block;" id="tpopularProject3" class="special thumbnail">.</div>
                  <div style="display:block;" class="question" ><b></b></div>
             </center>
          </td>
          <td style="font-size:20px;">
             <center>
                <div style="display:block;" id="tpopularProject4" class="special thumbnail">.</div>
                <div style="display:block;" class="question" ><b></b></div>
              </center>
          </td>

       </table>
       </center>
    </div>
  </div>
  </body>
</html>
